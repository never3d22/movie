# CinemaFlow

Приложение **CinemaFlow** — это одностраничный прототип онлайн-кинотеатра, который использует API видеобалансера [`api.apbugall.org`](https://api.apbugall.org/) для поиска и отображения фильмов, сериалов, аниме и TV-шоу.

## Основные возможности

- Подборка материалов по выбранной категории (по умолчанию — фильмы).
- Поиск по названию и году выпуска с использованием внешнего API.
- Просмотр карточки с подробной информацией: описание, жанры, актерский состав, рейтинги и др.
- Тестовый встраиваемый плеер с переключением озвучек (при наличии в ответе API) и загрузкой iframe только по клику.
- Панель настроек для ввода собственного API-токена и домена плеера, поддерживающая сохранение в `localStorage`.
- Постраничная навигация по каталогу с выбором количества карточек на странице.
- Минималистичный интерфейс в одном HTML-файле, без зависимостей и сборщиков.

## Структура проекта

- `index.html` — разметка и базовая структура интерфейса.
- `style.css` — стилизация приложения.
- `app.js` — логика работы с API и отрисовка данных на странице.

## Запуск

Приложение работает как статический сайт. Достаточно открыть `index.html` в браузере.

Для локальной разработки можно использовать любой статический сервер, например:

```bash
npx serve .
```

> **Внимание.** Для запросов к API необходим действующий токен. В демо-версии используется предоставленный ключ. При публикации рекомендуется хранить токен в защищённом месте и проксировать запросы через сервер.

## Как подключается плеер

- При выборе карточки приложение формирует ссылку с использованием домена из настроек (по умолчанию `https://video.apbugall.org/`).
- Если у фильма нет ID Кинопоиска, используются IMDB, World Art, либо связка название+год.
- Плеер подставляется только после клика по кнопке, и в запрос добавляется `autoplay=1`, как рекомендует документация.
- Переключение озвучки обновляет параметр `translation` без перезагрузки страницы.

## Настройка токена и домена плеера

- Кнопка «Настройки» в шапке открывает диалог, где можно указать собственный токен API и домен плеера.
- Значения сохраняются в `localStorage`, поэтому при повторном заходе настройки не пропадут.
- Домен плеера обязательно должен быть заранее добавлен в настройках видеобалансера. Без этого iframe заблокирует воспроизведение.
- Указывайте адрес с протоколом и завершающим слэшем. Поддерживаются публичные и локальные домены, например `https://video.yoursite.ru/` или `http://localhost:3000/`.
- Кнопка «Текущий домен» автоматически подставит адрес страницы, на которой открыто приложение. Это удобно при локальной разработке (при необходимости добавьте домен `localhost` в белый список видеобалансера).
- Для подтверждения домена в корне проекта добавлен файл `allohatv.txt` с кодом проверки `77cfcee3b72fd0cac67ed4b3d6215a` — разместите его вместе с приложением.
